!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=31)}({31:function(e,t,i){e.exports=i("p3Fd")},p3Fd:function(e,t,i){"use strict";$(document).ready((function(){var e;$("#invoiceCurrencyId").select2({width:"100%",placeholder:"Select Currency"}),$("#discountTypeSelect").select2({width:"100%",placeholder:"Select Discount Type"}),$("#salesAgentId").select2({width:"100%"}),$(".invoiceDate").datetimepicker({format:"YYYY-MM-DD",useCurrent:!1,sideBySide:!0,maxDate:new Date,icons:{next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),$(".invoiceDueDate").datetimepicker({format:"YYYY-MM-DD",useCurrent:!1,sideBySide:!0,icons:{next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),setTimeout((function(){1==editData&&""!==$(".invoiceDueDate").val()?$(".invoiceDueDate").data("DateTimePicker").minDate($(".invoiceDueDate").val()):$(".invoiceDueDate").data("DateTimePicker").minDate(new Date)}),1e3),$("#addItemSelectBox").on("select2:select",(function(){var e=$(this).val();$.ajax({url:itemUrl+"/"+e+"/edit",type:"GET",success:function(e){""!==$(".items-container>tr:last-child").find(".item-name").val()&&$("#itemAddBtn").trigger("click");var t=$(".items-container>tr:last-child"),i=document.createElement("textarea");i.innerHTML=e.data.title,t.find(".item-name").val(i.value),t.find(".item-description").val($(e.data.description).text()),t.find(".qty").val("1").trigger("keyup"),t.find(".rate").val(e.data.rate).trigger("keyup");var a=[];e.data.first_tax&&a.push(e.data.first_tax.id),e.data.second_tax&&a.push(e.data.second_tax.id),t.find(".tax-rates").val(a).trigger("change")}})})),$(document).on("click","#saveAsDraft, #saveAndSend",(function(t){if(t.preventDefault(),e)return!1;e=!0;var i=$(this).data("status"),a=document.getElementById("invoiceForm"),n=new FormData(a);n.append("payment_status",i);var r,s,d,o,l,p,c,u,h=0,m=[];p=$(".total-numbers").text(),$(".items-container>tr").each((function(){m=[],r=$(this).find(".item-name").val(),s=$(this).find(".item-description").val(),d=$(this).find(".qty").val(),o=$(this).find(".rate").val(),l=$(this).find(".item-amount").text(),$.each($($(this).find(".tax-rates option:selected")),(function(){m.push($(this).val())})),n.append("itemsArr["+h+"][item]",r),n.append("itemsArr["+h+"][description]",s),n.append("itemsArr["+h+"][quantity]",d),n.append("itemsArr["+h+"][rate]",o),n.append("itemsArr["+h+"][total]",l),n.append("itemsArr["+h+"][tax]",m),h++})),$("#taxesListTable>tr").each((function(){c=(c=$(this).find(".tax-value").text()).replace("%",""),u=$(this).find(".footer-tax-numbers").text(),n.append("taxes["+c+"]",u)})),n.append("total_amount",p),n.append("sub_total",$("#subTotal").text()),$.ajax({url:invoiceStoreURL,type:"POST",data:n,processData:!1,contentType:!1,beforeSend:function(){startLoader()},success:function(e){if(e.success){var t=e.data.id;window.location=invoiceUrl+"/"+t}},error:function(t){displayErrorMessage(t.responseJSON.message),e=!1},complete:function(){stopLoader()}})})),$(document).on("click","#editSaveSend",(function(e){e.preventDefault();var t=$(this).data("status");$("#editAdminNote").summernote("isEmpty")&&$("#editAdminNote").val(""),$("#editClientNote").summernote("isEmpty")&&$("#editClientNote").val(""),$("#editTermAndConditions").summernote("isEmpty")&&$("#editTermAndConditions").val("");var i=document.getElementById("editInvoiceForm"),a=new FormData(i);a.append("payment_status",t);var n,r,s,d,o,l,p,c,u=0,h=[];l=$(".total-numbers").text(),$(".items-container>tr").each((function(){h=[],n=$(this).find(".item-name").val(),r=$(this).find(".item-description").val(),s=$(this).find(".qty").val(),d=$(this).find(".rate").val(),o=$(this).find(".item-amount").text(),$.each($($(this).find(".tax-rates option:selected")),(function(){h.push($(this).val())})),a.append("itemsArr["+u+"][item]",n),a.append("itemsArr["+u+"][description]",r),a.append("itemsArr["+u+"][quantity]",s),a.append("itemsArr["+u+"][rate]",d),a.append("itemsArr["+u+"][total]",o),a.append("itemsArr["+u+"][tax]",h),u++})),$("#taxesListTable>tr").each((function(){p=(p=$(this).find(".tax-value").text()).replace("%",""),c=$(this).find(".footer-tax-numbers").text(),a.append("taxes["+p+"]",c)})),a.append("total_amount",l),a.append("sub_total",$("#subTotal").text());var m=$("#hdnInvoiceId").val();$.ajax({url:invoiceEditURL+"/"+m,type:"POST",data:a,processData:!1,contentType:!1,beforeSend:function(){startLoader()},success:function(e){if(e.success){var t=e.data.id;window.location.href=invoiceEditURL+"/"+t}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){stopLoader()}})})),"undefined"!=typeof invoiceEdit&&invoiceEdit&&($(".tax-rates").trigger("change"),$(".qty").trigger("keyup"),$("#adjustment").trigger("keyup"),window.calculateSubTotal(),$("#invoiceNumber").attr("readonly",!0)),$(".address-modal").on("show.bs.modal",(function(){setTimeout((function(){$("#billStreet").focus()}),500)})),window.checkBillAddressFields=function(){return $("#billStreet,#billCity,#billState,#billZipCode,#billCountry").filter((function(){return""!=this.value}))},window.showBillingShippingAddressError=function(e){$(".address-modal").modal("show"),displayErrorMessage($(e).data("err-msg"))};$(document).on("change","#shippingAddressEnable",(function(){$(this).prop("checked")||"undefined"==typeof createData&&"undefined"==typeof editData||($("#shipStreet").val(""),$("#copyBillingAddress").prop("checked",!1),$("#shipStreet,#shipCity,#shipState,#shipZipCode,#shipCountry").val(""))})),window.checkStreetField=function(){return""===$.trim($("#billStreet").val())?(showBillingShippingAddressError("#billStreet"),!1):!$("#shippingAddressEnable").prop("checked")||""!==$.trim($("#shipStreet").val())||(showBillingShippingAddressError("#shipStreet"),!1)},$(document).on("click","#btnSave",(function(){if(!checkStreetField())return!1;if(!checkZipcode($("#billZipCode").val()))return!1;if($("#shippingAddressEnable").prop("checked")){var e=$("#shipZipCode").val();if(!checkZipcode(e))return!1}var t=$("#addressForm"),i=$("#shippingAddressForm");"undefined"!=typeof createInvoiceAddress&&createInvoiceAddress&&(0==checkBillAddressFields().length?$("#bill_to").html("_ _ _ _ _ _"):$("#bill_to").html(createAddressDetail(t)),1==$("#shippingAddressEnable").prop("checked")&&""!=$("#shipStreet").val()?$("#ship_to").html(createAddressDetail(i)):$("#ship_to").html("_ _ _ _ _ _")),"undefined"!=typeof editInvoiceAddress&&editInvoiceAddress&&(0==checkBillAddressFields().length?$("#bill_to").html("_ _ _ _ _ _"):$("#bill_to").html(getAddressDetail(t)),1==$("#shippingAddressEnable").prop("checked")&&""!=$("#shipStreet").val()?$("#ship_to").html(getAddressDetail(i)):$("#ship_to").html("_ _ _ _ _ _")),$(".address-modal").modal("hide")})),"undefined"!=typeof editData&&""!==$.trim($("#shipStreet").val())&&($("#shippingAddressEnable").prop("checked",!0),$("#shippingAddressForm").slideDown(),$("#shipStreet").val()),$(document).on("change","#customerSelectBox",(function(){var e=$(this).val();$("#shippingAddressEnable").prop("checked",!1),$("#shippingAddressForm").slideUp(),$("#copyBillingAddress").prop("checked",!1),$("#billStreet,#billCity,#billState,#billZipCode,#billCountry").val(""),$("#shipStreet,#shipCity,#shipState,#shipZipCode,#shipCountry").val(""),$.ajax({url:customerURL,type:"GET",data:{customer_id:e},success:function(e){$("#bill_to").empty(),$("#ship_to").empty();var t=e.data[0],i=e.data[1];isEmpty(t)?($("#bill_to").html("_ _ _ _ _ _"),$("#ship_to").html("_ _ _ _ _ _")):($("#bill_to").append("<span>"+t.street+"</span><br>"),$("#bill_to").append("<span>"+t.city+",</span>"),$("#bill_to").append("<span>"+t.state+"</span><br>"),$("#bill_to").append("<span>"+t.country+"-</span>"),$("#bill_to").append("<span>"+t.zip+"</span>"),$("#billStreet").val(e.data[0].street),$("#billCity").val(e.data[0].city),$("#billState").val(e.data[0].state),$("#billZipCode").val(e.data[0].zip),$("#billCountry").val(e.data[0].country)),isEmpty(i)?($("#shippingAddressEnable").prop("checked",!1),$("#shippingAddressForm").slideUp(),$("#copyBillingAddress").prop("checked",!1),$("#ship_to").html("_ _ _ _ _ _")):($("#shippingAddressEnable").prop("checked",!0),$("#shippingAddressForm").slideDown(),$("#ship_to").append("<span>"+i.street+"</span><br>"),$("#ship_to").append("<span>"+i.city+",</span>"),$("#ship_to").append("<span>"+i.state+"</span><br>"),$("#ship_to").append("<span>"+i.country+"-</span>"),$("#ship_to").append("<span>"+i.zip+"</span>"),$("#shipStreet").val(e.data[1].street),$("#shipCity").val(e.data[1].city),$("#shipState").val(e.data[1].state),$("#shipZipCode").val(e.data[1].zip),$("#shipCountry").val(e.data[1].country))},error:function(e){displayErrorMessage(e.responseJSON.message)}})})),$(document).on("click","#copyBillingAddress",(function(){$(this).prop("checked")&&($("#shipStreet").val($("#billStreet").val()),$("#shipCity").val($("#billCity").val()),$("#shipState").val($("#billState").val()),$("#shipZipCode").val($("#billZipCode").val()),$("#shipCountry").val($("#billCountry").val()))}))}))}});
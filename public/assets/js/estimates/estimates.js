!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=60)}({60:function(e,t,i){e.exports=i("qSBH")},qSBH:function(e,t,i){"use strict";$(document).ready((function(){$(".datepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss",useCurrent:!1,sideBySide:!0,maxDate:new Date,icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),$(".due-datepicker").datetimepicker({format:"YYYY-MM-DD HH:mm:ss",useCurrent:!1,sideBySide:!0,icons:{up:"fa fa-chevron-up",down:"fa fa-chevron-down",next:"fa fa-chevron-right",previous:"fa fa-chevron-left"}}),setTimeout((function(){1==editData&&""!==$(".due-datepicker").val()?$(".due-datepicker").data("DateTimePicker").minDate($(".due-datepicker").val()):$(".due-datepicker").data("DateTimePicker").minDate(moment().millisecond(0).second(0).minute(0).hour(0))}),1e3),$("#estimateCurrencyId").select2({width:"100%",placeholder:"Select Currency"}),$("#discountTypeSelect").select2({width:"100%",placeholder:"Select Discount Type"}),$("#saleAgentId").select2({width:"100%"}),$("#addItemSelectBox").on("select2:select",(function(){var e=$(this).val();$.ajax({url:itemUrl+"/"+e+"/edit",type:"GET",success:function(e){""!==$(".items-container>tr:last-child").find(".item-name").val()&&$("#itemAddBtn").trigger("click");var t=$(".items-container>tr:last-child"),i=document.createElement("textarea");i.innerHTML=e.data.title,t.find(".item-name").val(i.value),t.find(".item-description").val($(e.data.description).text()),t.find(".qty").val("1").trigger("keyup"),t.find(".rate").val(e.data.rate).trigger("keyup");var a=[];e.data.first_tax&&a.push(e.data.first_tax.id),e.data.second_tax&&a.push(e.data.second_tax.id),t.find(".tax-rates").val(a).trigger("change")}})})),$(document).on("click","#saveAsDraft, #saveAndSend",(function(e){var t=$(this).data("status");e.preventDefault();var i=document.getElementById("estimateForm"),a=new FormData(i);a.append("status",t);var n,s,r,d,o,p,l,c,u=0,h=[];p=$(".total-numbers").text(),$(".items-container>tr").each((function(){h=[],n=$(this).find(".item-name").val(),s=$(this).find(".item-description").val(),r=$(this).find(".qty").val(),d=$(this).find(".rate").val(),o=$(this).find(".item-amount").text(),$.each($($(this).find(".tax-rates option:selected")),(function(){h.push($(this).val())})),a.append("itemsArr["+u+"][item]",n),a.append("itemsArr["+u+"][description]",s),a.append("itemsArr["+u+"][quantity]",r),a.append("itemsArr["+u+"][rate]",d),a.append("itemsArr["+u+"][total]",o),a.append("itemsArr["+u+"][tax]",h),u++})),$("#taxesListTable>tr").each((function(){l=(l=$(this).find(".tax-value").text()).replace("%",""),c=$(this).find(".footer-tax-numbers").text(),a.append("taxes["+l+"]",c)})),a.append("total_amount",p),a.append("sub_total",$("#subTotal").text()),$.ajax({url:storeEstimateUrl,type:"POST",data:a,processData:!1,contentType:!1,beforeSend:function(){startLoader()},success:function(e){if(e.success){var t=e.data.id;window.location=estimateUrl+"/"+t}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){stopLoader()}})})),$(document).on("click","#editSaveSend",(function(e){var t=$(this).data("status");$("#editAdminNote").summernote("isEmpty")&&$("#editAdminNote").val(""),$("#editClientNote").summernote("isEmpty")&&$("#editClientNote").val(""),$("#editTermAndConditions").summernote("isEmpty")&&$("#editTermAndConditions").val(""),e.preventDefault();var i=document.getElementById("editEstimateForm"),a=new FormData(i);a.append("status",t);var n,s,r,d,o,p,l,c,u=0,h=[];p=$(".total-numbers").text(),$(".items-container>tr").each((function(){h=[],n=$(this).find(".item-name").val(),s=$(this).find(".item-description").val(),r=$(this).find(".qty").val(),d=$(this).find(".rate").val(),o=$(this).find(".item-amount").text(),$.each($($(this).find(".tax-rates option:selected")),(function(){h.push($(this).val())})),a.append("itemsArr["+u+"][item]",n),a.append("itemsArr["+u+"][description]",s),a.append("itemsArr["+u+"][quantity]",r),a.append("itemsArr["+u+"][rate]",d),a.append("itemsArr["+u+"][total]",o),a.append("itemsArr["+u+"][tax]",h),u++})),$("#taxesListTable>tr").each((function(){l=(l=$(this).find(".tax-value").text()).replace("%",""),c=$(this).find(".footer-tax-numbers").text(),a.append("taxes["+l+"]",c)})),a.append("total_amount",p),a.append("sub_total",$("#subTotal").text());var m=$("#estimateId").val();$.ajax({url:estimateEditURL+"/"+m,type:"POST",data:a,processData:!1,contentType:!1,beforeSend:function(){startLoader()},success:function(e){if(e.success){var t=e.data.id;window.location=estimateEditURL+"/"+t}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){stopLoader()}})})),"undefined"!=typeof estimateEdit&&estimateEdit&&($(".tax-rates").trigger("change"),$(".qty").trigger("keyup"),$("#adjustment").trigger("keyup"),window.calculateSubTotal(),$("#estimateNumber").attr("readonly",!0),$(".address-modal").trigger("hidden.bs.modal")),$(".address-modal").on("show.bs.modal",(function(){setTimeout((function(){$("#billStreet").focus()}),500)})),window.checkBillAddressFields=function(){return $("#billStreet,#billCity,#billState,#billZipCode,#billCountry").filter((function(){return""!=this.value}))},window.showBillingShippingAddressError=function(e){$(".address-modal").modal("show"),displayErrorMessage($(e).data("err-msg"))};$(document).on("change","#shippingAddressEnable",(function(){$(this).prop("checked")||"undefined"==typeof createData&&"undefined"==typeof editData||($("#shipStreet").val(""),$("#copyBillingAddress").prop("checked",!1),$("#shipStreet,#shipCity,#shipState,#shipZipCode,#shipCountry").val(""))})),window.checkStreetField=function(){return""===$.trim($("#billStreet").val())?(showBillingShippingAddressError("#billStreet"),!1):!$("#shippingAddressEnable").prop("checked")||""!==$.trim($("#shipStreet").val())||(showBillingShippingAddressError("#shipStreet"),!1)},$(document).on("click","#btnSave",(function(){if(!checkStreetField())return!1;if(!checkZipcode($("#billZipCode").val()))return!1;if($("#shippingAddressEnable").prop("checked")){var e=$("#shipZipCode").val();if(!checkZipcode(e))return!1}var t=$("#addressForm"),i=$("#shippingAddressForm");"undefined"!=typeof createEstimateAddress&&createEstimateAddress&&(0==checkBillAddressFields().length?$("#bill_to").html("_ _ _ _ _ _"):$("#bill_to").html(createAddressDetail(t)),1==$("#shippingAddressEnable").prop("checked")&&""!=$("#shipStreet").val()?$("#ship_to").html(createAddressDetail(i)):$("#ship_to").html("_ _ _ _ _ _")),"undefined"!=typeof editEstimateAddress&&editEstimateAddress&&(0==checkBillAddressFields().length?$("#bill_to").html("_ _ _ _ _ _"):$("#bill_to").html(getAddressDetail(t)),1==$("#shippingAddressEnable").prop("checked")&&""!=$("#shipStreet").val()?$("#ship_to").html(getAddressDetail(i)):$("#ship_to").html("_ _ _ _ _ _")),$(".address-modal").modal("hide")})),"undefined"!=typeof editData&&""!==$.trim($("#shipStreet").val())&&($("#shippingAddressEnable").prop("checked",!0),$("#shippingAddressForm").slideDown(),$("#shipStreet").val()),$(document).on("change","#customerSelectBox",(function(){var e=$(this).val();$("#shippingAddressEnable").prop("checked",!1),$("#shippingAddressForm").slideUp(),$("#copyBillingAddress").prop("checked",!1),$("#billStreet,#billCity,#billState,#billZipCode,#billCountry").val(""),$("#shipStreet,#shipCity,#shipState,#shipZipCode,#shipCountry").val(""),$.ajax({url:customerURL,type:"GET",data:{customer_id:e},success:function(e){$("#bill_to").empty(),$("#ship_to").empty();var t=e.data[0],i=e.data[1];$("#copyBillingAddress").prop("checked",!0),isEmpty(t)?($("#bill_to").html("_ _ _ _ _ _"),$("#ship_to").html("_ _ _ _ _ _")):($("#bill_to").append("<span>"+t.street+"</span><br>"),$("#bill_to").append("<span>"+t.city+",</span>"),$("#bill_to").append("<span>"+t.state+"</span><br>"),$("#bill_to").append("<span>"+t.country+"-</span>"),$("#bill_to").append("<span>"+t.zip+"</span>"),$("#billStreet").val(e.data[0].street),$("#billCity").val(e.data[0].city),$("#billState").val(e.data[0].state),$("#billZipCode").val(e.data[0].zip),$("#billCountry").val(e.data[0].country)),isEmpty(i)?($("#shippingAddressEnable").prop("checked",!1),$("#shippingAddressForm").slideUp(),$("#copyBillingAddress").prop("checked",!1),$("#ship_to").html("_ _ _ _ _ _")):($("#shippingAddressEnable").prop("checked",!0),$("#shippingAddressForm").slideDown(),$("#ship_to").append("<span>"+i.street+"</span><br>"),$("#ship_to").append("<span>"+i.city+",</span>"),$("#ship_to").append("<span>"+i.state+"</span><br>"),$("#ship_to").append("<span>"+i.country+"-</span>"),$("#ship_to").append("<span>"+i.zip+"</span>"),$("#shipStreet").val(e.data[1].street),$("#shipCity").val(e.data[1].city),$("#shipState").val(e.data[1].state),$("#shipZipCode").val(e.data[1].zip),$("#shipCountry").val(e.data[1].country))},error:function(e){displayErrorMessage(e.responseJSON.message)}})})),$(document).on("click","#copyBillingAddress",(function(){$(this).prop("checked")&&($("#shipStreet").val($("#billStreet").val()),$("#shipCity").val($("#billCity").val()),$("#shipState").val($("#billState").val()),$("#shipZipCode").val($("#billZipCode").val()),$("#shipCountry").val($("#billCountry").val()))}))}))}});